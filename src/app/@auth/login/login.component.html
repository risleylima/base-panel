<div class="row d-flex justify-content-center mb-5">
  <div class="col-8">
    <img class="img-fluid logo" src="assets/img/logo-rlima-h.png" alt="Logo RLima" />
  </div>
  <div class="col-8 text-end fw-bold">
    Painel de Controle BASE
  </div>
</div>

<form (ngSubmit)="login()" #form="ngForm" aria-labelledby="title">
  <div class="form-control-group">
    <label class="label" for="input-login">
      Login:
      <span class="text-danger">
        *
      </span>
      <ng-container *ngIf="username.invalid && username.touched">
        <span class="text-danger ml-3 " *ngIf="username.errors?.['required']">
          O login é obrigatório!
        </span>
      </ng-container>
    </label>
    <input nbInput fullWidth [(ngModel)]="user.login" #username="ngModel" name="login" id="input-login"
      placeholder="Digite seu login aqui" autofocus
      [status]="username.dirty ? (username.invalid  ? 'danger' : 'success') : 'basic'"
      [required]="getConfigValue('forms.validation.username.required')"
      [attr.aria-invalid]="username.invalid && username.touched ? true : null">
  </div>

  <div class="form-control-group">
    <label class="label" for="input-password">
      Senha:
      <span class="text-danger fw-bold">
        *
      </span>
      <ng-container *ngIf="password.invalid && password.touched ">
        <span class="text-danger ml-3" *ngIf="password.errors?.['required']">
          A senha é obrigatória!
        </span>
        <span class="text-danger ml-3" *ngIf="password.errors?.['minlength']">
          A senha deve conter
          no mínimo {{ getConfigValue('forms.validation.password.minLength') }}
          caracteres
        </span>
        <span class="text-danger ml-3" *ngIf="password.errors?.['maxlength']">
          A senha deve conter
          até {{ getConfigValue('forms.validation.password.maxLength') }}
          caracteres
        </span>
      </ng-container>
    </label>
    <input nbInput fullWidth [(ngModel)]="user.password" #password="ngModel" name="password" type="password"
      id="input-password" placeholder="Digite sua senha aqui"
      [status]="password.dirty ? (password.invalid  ? 'danger' : 'success') : 'basic'"
      [required]="getConfigValue('forms.validation.password.required')"
      [minlength]="getConfigValue('forms.validation.password.minLength')"
      [maxlength]="getConfigValue('forms.validation.password.maxLength')"
      [attr.aria-invalid]="password.invalid && password.touched ? true : null">
  </div>

  <div class="form-control-group accept-group">
    <nb-checkbox name="rememberMe" [(ngModel)]="user.rememberMe" *ngIf="rememberMe">Lembrar-me</nb-checkbox>
    <a class="forgot-password" routerLink="../request-password">Esqueceu a Senha?</a>
  </div>

  <button nbButton fullWidth status="success" [disabled]="(!!submitted || !form.valid || !!messages?.length)" [class.btn-pulse]="submitted">
    Enviar
  </button>
</form>

<section *ngIf="socialLinks && socialLinks.length > 0" class="links" aria-label="Social sign in">
  ou entre com:
  <div class="socials">
    <ng-container *ngFor="let socialLink of socialLinks">
      <a *ngIf="socialLink.link" [routerLink]="socialLink.link" [attr.target]="socialLink.target"
        [attr.class]="socialLink.icon" [class.with-icon]="socialLink.icon">{{ socialLink.title }}</a>
      <a *ngIf="socialLink.url" [attr.href]="socialLink.url" [attr.target]="socialLink.target"
        [attr.class]="socialLink.icon" [class.with-icon]="socialLink.icon">{{ socialLink.title }}</a>
    </ng-container>
  </div>
</section>